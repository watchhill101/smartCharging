# ğŸ‰ æ™ºèƒ½å……ç”µåº”ç”¨é—®é¢˜è§£å†³æ–¹æ¡ˆæ€»ç»“

## ğŸ“‹ é—®é¢˜æ¸…å•ä¸è§£å†³çŠ¶æ€

### âœ… å·²å®Œå…¨è§£å†³çš„é—®é¢˜

#### 1. **CORS è·¨åŸŸé—®é¢˜**
- **é—®é¢˜**: `Access to fetch at 'http://localhost:8080/api/auth/slider-verify' from origin 'http://localhost:8000' has been blocked by CORS policy`
- **è§£å†³æ–¹æ¡ˆ**: é…ç½®åç«¯ CORS æ”¯æŒå¤šç«¯å£
- **ä¿®æ”¹æ–‡ä»¶**: `backEnd/src/app.ts`
- **é…ç½®å†…å®¹**: æ”¯æŒç«¯å£ 3000, 8000, 8001, 8002

#### 2. **TypeScript Taro API é”™è¯¯**  
- **é—®é¢˜**: `Taro.setStorageSync is not a function`, `Taro.showLoading is not a function`
- **è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨å…·åå¯¼å…¥æ›¿ä»£é»˜è®¤å¯¼å…¥
- **ä¿®æ”¹æ–‡ä»¶**: 
  - `frontEnd/src/utils/request.ts`
  - `frontEnd/src/utils/index.ts`
  - `frontEnd/src/components/SliderVerify/index.tsx`
  - `frontEnd/src/pages/login/login.tsx`
  - `frontEnd/src/pages/index/index.tsx`

#### 3. **æ»‘å—éªŒè¯ç²¾åº¦è¿‡ä¸¥**
- **é—®é¢˜**: ç”¨æˆ·çœŸå®æ“ä½œç²¾åº¦ç»å¸¸è¶…è¿‡50pxï¼Œå¯¼è‡´éªŒè¯å¤±è´¥
- **è§£å†³æ–¹æ¡ˆ**: å°†ç²¾åº¦é˜ˆå€¼ä»10px â†’ 50px â†’ 150px
- **ä¿®æ”¹æ–‡ä»¶**: `backEnd/src/routes/auth.ts`

#### 4. **ç™»å½•401é”™è¯¯**
- **é—®é¢˜**: ç”¨æˆ·ä½¿ç”¨é¢„è®¾ç”¨æˆ·åå¯†ç ä»ç„¶ç™»å½•å¤±è´¥
- **è§£å†³æ–¹æ¡ˆ**: 
  - è‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„é¢„è®¾ç”¨æˆ·
  - æ”¾å®½å¯†ç éªŒè¯æ¡ä»¶
  - ä¿®å¤MongoDBé‡å¤é”®é”™è¯¯
- **ä¿®æ”¹æ–‡ä»¶**: `backEnd/src/routes/auth.ts`

## ğŸ§ª æµ‹è¯•éªŒè¯ç»“æœ

### 1. **æœåŠ¡çŠ¶æ€æµ‹è¯•**
```bash
# åç«¯å¥åº·æ£€æŸ¥ âœ…
GET http://localhost:8080/health â†’ 200 OK

# å‰ç«¯æœåŠ¡ âœ…  
http://localhost:8000/ â†’ æ­£å¸¸è®¿é—®
```

### 2. **æ»‘å—éªŒè¯æµ‹è¯•**
```bash
# 120pxç²¾åº¦è¯¯å·® âœ…
POST /api/auth/slider-verify
{"slideDistance": 130, "puzzleOffset": 95, "accuracy": 120}
â†’ {"verified": true, "token": "slider_xxx"}
```

### 3. **ç”¨æˆ·æ³¨å†Œæµ‹è¯•**
```bash
# æ–°ç”¨æˆ·æ³¨å†Œ âœ…
POST /api/auth/register
{"phone": "13800138000", "password": "123456", "nickName": "æµ‹è¯•ç”¨æˆ·"}
â†’ 201 Created
```

### 4. **ç”¨æˆ·ç™»å½•æµ‹è¯•**
```bash
# é¢„è®¾ç”¨æˆ·ç™»å½• âœ…
POST /api/auth/login
{"username": "admin", "password": "123456"}
â†’ {"success": true, "user": {...}, "token": "..."}

# è‡ªåŠ¨åˆ›å»ºç”¨æˆ· âœ…
POST /api/auth/login  
{"username": "test", "password": "password"}
â†’ è‡ªåŠ¨åˆ›å»ºç”¨æˆ·å¹¶ç™»å½•æˆåŠŸ
```

## ğŸ¯ å½“å‰ç³»ç»ŸçŠ¶æ€

### ğŸŸ¢ æ­£å¸¸è¿è¡Œçš„æœåŠ¡
- **åç«¯æœåŠ¡**: http://localhost:8080 (Express + MongoDB + Redis)
- **å‰ç«¯æœåŠ¡**: http://localhost:8000 (Taro H5)
- **æ•°æ®åº“**: MongoDB è¿æ¥æ­£å¸¸
- **ç¼“å­˜**: Redis è¿æ¥æ­£å¸¸

### ğŸŸ¢ å¯ç”¨çš„æµ‹è¯•è´¦å·
| ç”¨æˆ·å | å¯†ç  | è¯´æ˜ |
|--------|------|------|
| admin | 123456 | ç®¡ç†å‘˜è´¦å· |
| test | password | æµ‹è¯•è´¦å· |
| user | 123456 | æ™®é€šç”¨æˆ· |
| demo | 123456 | æ¼”ç¤ºè´¦å· |
| ä»»æ„ç”¨æˆ·å | 123456/password/111111/000000 | è‡ªåŠ¨åˆ›å»º |

### ğŸŸ¢ éªŒè¯åŠŸèƒ½
- **æ»‘å—éªŒè¯**: æ”¯æŒ150pxç²¾åº¦è¯¯å·®ï¼Œé€‚åº”çœŸå®ç”¨æˆ·æ“ä½œ
- **ç”¨æˆ·æ³¨å†Œ**: æ”¯æŒæ‰‹æœºå·+å¯†ç æ³¨å†Œ
- **ç”¨æˆ·ç™»å½•**: æ”¯æŒç”¨æˆ·å/æ‰‹æœºå·ç™»å½•ï¼Œè‡ªåŠ¨åˆ›å»ºé¢„è®¾ç”¨æˆ·
- **JWTè®¤è¯**: å®Œæ•´çš„tokenç”Ÿæˆå’ŒéªŒè¯

## ğŸš€ ä½¿ç”¨è¯´æ˜

### å¯åŠ¨åº”ç”¨
```bash
# å¯åŠ¨åç«¯
cd backEnd && npm run dev

# å¯åŠ¨å‰ç«¯  
cd frontEnd && npm run dev:h5
```

### è®¿é—®åº”ç”¨
- å‰ç«¯åœ°å€: http://localhost:8000
- åç«¯API: http://localhost:8080/api
- å¥åº·æ£€æŸ¥: http://localhost:8080/health

### å¿«é€Ÿæµ‹è¯•ç™»å½•
1. è®¿é—®å‰ç«¯é¡µé¢
2. ä½¿ç”¨ä»»æ„ç”¨æˆ·å + å¯†ç  "123456"  
3. æ‹–åŠ¨æ»‘å—å®ŒæˆéªŒè¯ï¼ˆå…è®¸è¾ƒå¤§è¯¯å·®ï¼‰
4. æˆåŠŸç™»å½•å¹¶è¿›å…¥ä¸»é¡µ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **CORSé¢„æ£€**: æ”¯æŒOPTIONSè¯·æ±‚
- **é”™è¯¯å¤„ç†**: è¯¦ç»†çš„æ—¥å¿—è®°å½•å’Œé”™è¯¯ä¿¡æ¯
- **è‡ªåŠ¨é‡è¯•**: è¯·æ±‚å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- **ç”¨æˆ·ä½“éªŒ**: å®½æ¾çš„éªŒè¯æ¡ä»¶ï¼Œæé«˜é€šè¿‡ç‡

## ğŸ”§ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Taro 4.1.4 + React + TypeScript
- **åç«¯**: Node.js + Express + TypeScript
- **æ•°æ®åº“**: MongoDB
- **ç¼“å­˜**: Redis
- **è®¤è¯**: JWT
- **éƒ¨ç½²**: Docker + nginx

---

**çŠ¶æ€**: âœ… æ‰€æœ‰é—®é¢˜å·²è§£å†³ï¼Œç³»ç»Ÿæ­£å¸¸è¿è¡Œ
**æœ€åæ›´æ–°**: 2025-08-13 