# 地图选择器模态框功能说明

## 功能概述

充电站详情页面的地图选择器已经从默认的 `Taro.showActionSheet` 升级为自定义的底部弹出模态框，提供更好的用户体验和视觉效果。

## 主要特性

### 1. **底部弹出设计**
- 从屏幕底部向上滑出
- 圆角设计，现代化UI风格
- 半透明背景遮罩，突出内容区域

### 2. **美观的视觉设计**
- 每个地图应用都有独特的图标
- 渐变背景的图标容器
- 悬停和点击效果
- 平滑的动画过渡

### 3. **响应式布局**
- 支持不同屏幕尺寸
- 移动端优化的触摸区域
- 自适应内容高度

## 界面结构

### 模态框头部
- **标题**: "选择地图应用"
- **关闭按钮**: 右上角的 ✕ 按钮
- **分割线**: 与内容区域分隔

### 地图应用列表
每个地图应用选项包含：
- **图标**: 独特的地图应用标识
- **名称**: 地图应用的中文名称
- **箭头**: 右侧的 › 指示符

### 底部操作区
- **取消按钮**: 全宽的取消按钮
- **圆角设计**: 现代化的按钮样式

## 支持的地图应用

### 🗺️ 高德地图
- 图标: 🗺️
- 协议: `amapuri://`
- 特点: 国内导航首选

### 📍 百度地图
- 图标: 📍
- 协议: `baidumap://`
- 特点: 精准定位服务

### 🌐 腾讯地图
- 图标: 🌐
- 协议: `qqmap://`
- 特点: 社交化地图

## 技术实现

### 状态管理
```typescript
const [showMapSelectorModal, setShowMapSelectorModal] = useState(false)
const [mapSelectorData, setMapSelectorData] = useState<{
  maps: Array<{name: string, url: string}>
  lat: number
  lng: number
  name: string
  address: string
} | null>(null)
```

### 核心函数
- **`openMapSelectorModal()`** - 打开地图选择器
- **`handleMapSelection()`** - 处理地图应用选择
- **`closeMapSelector()`** - 关闭地图选择器

### 样式特点
- **固定定位**: `position: fixed`
- **底部对齐**: `align-items: flex-end`
- **高层级**: `z-index: 1000`
- **动画效果**: `slideUp` 关键帧动画

## 用户体验优化

### 1. **视觉反馈**
- 悬停时背景色变化
- 点击时即时响应
- 平滑的过渡动画

### 2. **交互设计**
- 点击遮罩关闭模态框
- 点击关闭按钮关闭模态框
- 点击取消按钮关闭模态框

### 3. **无障碍支持**
- 清晰的视觉层次
- 合适的触摸区域大小
- 语义化的HTML结构

## 动画效果

### 滑入动画
```css
@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
```

### 过渡效果
- 背景色变化: `transition: background-color 0.2s`
- 整体动画: `animation: slideUp 0.3s ease-out`

## 响应式设计

### 桌面端 (>480px)
- 最大宽度: 400px
- 居中显示
- 标准内边距

### 移动端 (≤480px)
- 全屏宽度
- 紧凑内边距
- 触摸友好的按钮尺寸

## 样式定制

### 颜色方案
- **主背景**: `#ffffff`
- **分割线**: `#f0f0f0`
- **悬停背景**: `#f8f9fa`
- **图标背景**: 渐变 `#667eea` 到 `#764ba2`

### 尺寸规范
- **图标容器**: 40px × 40px (移动端: 36px × 36px)
- **按钮高度**: 48px (移动端: 44px)
- **圆角半径**: 20px (顶部), 24px (按钮)

## 使用流程

1. **用户点击导航按钮**
2. **系统尝试原生导航API**
3. **如果失败，显示地图选择器模态框**
4. **用户选择偏好的地图应用**
5. **系统打开选中的地图应用**
6. **模态框自动关闭**

## 优势对比

### 相比默认 ActionSheet
- ✅ 更美观的视觉设计
- ✅ 自定义图标和样式
- ✅ 更好的动画效果
- ✅ 响应式布局支持
- ✅ 统一的用户体验

### 技术优势
- ✅ 完全可控的样式
- ✅ 更好的状态管理
- ✅ 可扩展的组件结构
- ✅ 跨平台一致性

## 扩展可能性

### 1. **主题支持**
- 深色模式
- 自定义配色方案
- 品牌化设计

### 2. **功能增强**
- 地图应用排序
- 用户偏好记忆
- 快速访问设置

### 3. **交互优化**
- 手势支持
- 键盘导航
- 语音控制

## 注意事项

1. **性能考虑**: 模态框组件按需渲染
2. **内存管理**: 及时清理状态数据
3. **错误处理**: 优雅降级到默认行为
4. **兼容性**: 支持各种设备和浏览器
